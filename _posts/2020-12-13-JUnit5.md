---
title: JUnit 5
date: 2020-12-12 00:00:00
categories:
- Java
tags:
- JUnit5
- TDD
- Java
---


# JUnit 5

## JUnit5란 무엇인가?

Junti은 이전 Junit과 달리, 3개의 다른 서브 프로젝트로부터 각기 다른 모듈들로 구성되어있다.

> ***JUnit 5 = Junit Platform + JUnit Jupiter + Junit Vintage***

Java 8부터 지원

### Junit Platform

Junit Platform은 JVM 환경에서 테스팅 프레임워크를 실행(launch)하기 위한 기초이다. 또한 플랫폼에서 가동되는 테스팅 프레임워크를 개발하기 위한 `TestEngine` API를 정의한다. 더 나아가, 플랫폼은 Command Line으로 플랫폼을 구동할 수 있는 `Console Launcher` 와 Junit 4 기반 환경에서의 플랫폼에서도 가동할 수 있는 Test Engine을 제공한다.

### Junit Jupiter

Junit Jupiter는 테스트 개발 모델과 새로운 테스트를 작성하기 위한 확장 모델로 구성된다. Jupiter의 하위 프로젝트는 플랫폼에서 Jupiter 기반 테스트를 실행하기 위한 `TestEngine`을 제공한다.

### Junit Vintage

Junit Vintage는 JUnit 3과 JUnit 4 기반 테스트를 실행할 때 `TestEngine` 을 제공한다.

### 사용해보기

Intelli의 Spring Initializer로 프로젝트를 생성하면 `spring-boot-starter-test` 때문에 Junit을 사용할 수 있다.

간단한 테스트용 클래스를 작성한 뒤, 테스트를 해보았다!

[https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FrcnbC%2FbtqP4kHxeAm%2FAKa7sQTSBipbYxcM1NhMSk%2Fimg.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FrcnbC%2FbtqP4kHxeAm%2FAKa7sQTSBipbYxcM1NhMSk%2Fimg.png)

```java
public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
}
```

```java
package com.example.junit5test.Calculator;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class MyFirstJUnitJupiterTest {

    private final Calculator calculator = new Calculator();

    @Test
    void addition() {
        assertEquals(2, calculator.add(1, 1));
    }

}
```

## Annotation

대부분의 중요한 어노테이션은 `junit-jupiter-api` 모듈에 있는 `org.junit.jupiter.api` 패키지에 있다.

[Annotation](https://www.notion.so/fb370e0cb4e54863aa970bb8f4e6db41)

### Meta-Annotations and Composed Annotations (사용자 정의 어노테이션)

JUnit Jupiter 어노테이션은 **메타 어노테이션**으로 사용할 수 있다. 즉 자동으로 메타 어노테이션의 의미들을 상속하는 사용자 정의 어노테이션을 생성할 수 있다!

**Fast Annotation**

```java
package com.example.junit5test.Meta;
import org.junit.jupiter.api.Tag;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Tag("fast")
public @interface Fast {
}
```

- `@Tag("fast")`를 `@FAST`로 대신 사용할 수 있다
- `@inteface`  : 커스텀 어노테이션을 정의할 때 사용한다.
- `@Target` : 어노테이션을 적용할 수 있는 대상(위치)를 나타낸다. Target에 선언된 대상과 다른 대상에 어노테이션을 적용할 경우 컴파일 에러 발생
- `@Retention` : 어노테이션이 어떤 시점까지 유지 되는지 알 수 있다.
    - SOURCE : 컴파일 시점에 컴파일러에 의해 제거. 즉 java파일 내에서만 적용
    - CLASS : SOURCE 뿐만 아니라 class파일 까지 적용됨
    - RUNTIME : SOURCE, CLASS뿐만 아니라 JVM에서 실행될 때도 적용된다. 리플렉션으로 어노테이션 조회 가능.

**Test Annotation**

```java
@Fast
@Test
void myFastTest() {
}
```

**@Fast와 @Test 섞은 @FastTest로 선언 가능**

```java
@FastTest
void myFastTest() {
}
```

### Test Classes and Methods

- **Test Class**

    최소 한 개 이상의 테스트 메서드를 포함하고 있는 최상위 클래스, `static` 멤버 클래스, `@Nested` 클래스

- **Test Method**

    `@Test`, `@RepeatedTest`, `@ParameterizedTest`, `@TestFactory`, `@TestTemplate` 로 선언된 메서드

- **Lifecycle Method**

    `@BeforeAll`, `@AfterAll`, `@BeforeEach`, `@AfterEach` 로 선언된 메서드

- 출처
    - [https://lee1535.tistory.com/116](https://lee1535.tistory.com/116)
    - [https://junit.org/junit5/docs/current/user-guide/](https://junit.org/junit5/docs/current/user-guide/)
    - [https://hongsii.github.io/2018/12/12/java-annotation/](https://hongsii.github.io/2018/12/12/java-annotation/)